<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reports</title>
    <!-- link css stylesheet for flask -->
    <link href="{{url_for('static', filename='styles/style.css')}}" rel="stylesheet"/>
    <link href="{{url_for('static', filename='styles/reports.css')}}" rel="stylesheet"/>

    <style>
        :root {
            /* Main */
            --bg-color: {{cf.main_background_color or '#0a0a1f'}};
            --text-color: {{cf.main_text_color or '#f0f0f0'}};
            /* Content */
            --content-color: {{cf.content_color or '#1c1c33'}};
            --content-text-color: {{cf.content_text_color or' #ffffff'}};
            /* Sidebar */
            --sidebar-color: {{cf.sidebar_color or '#193763'}};
            --sidebar-text-color: {{cf.sidebar_text_color or '#ffffff'}};
            /* Buttons */
            --button-color: {{cf.button_color or '#1a73ff'}};
            --button-text-color: {{cf.button_text_color or '#ffffff'}};
            --button-hover-color: {{cf.button_hover_color or '#0050b3'}};
            /* Borders */
            --border-color: {{cf.border_color or' #3399ff'}};
        }
    </style>
</head>
<body>
    <div class="page-wrapper">
        <div class="sidebar"> 
            
            <div>
                <button class= "huge-button" type="submit" id="send-now" name = "send-now" value = "send-now" title="Ignore email schedule and send email reports now"> Send Report Now</button>
                <br><hr><br>
                <h1>Clocked in </h1>
                    <div>
                        <ul>
                            <li>
                            </li>
                        </ul>
                    </div>
            </div>
        </div>
        <div class="main-content">
            <div class="top-menu">
                <a href="/home">Home</a>
                <a href="/reports">Reports</a>
                <a href="/settings">Settings</a>
            </div>
            <div>
                <form class="form-row" method="POST" action="/reports">
                        <label for="search">Search</label>
                        <input class="name" type="text" name="search" id="search" placeholder="Han Solo" maxlength="50" required> 
                        <label for="field">Select Field</label>
                        <select id="field" name="field" required>
                            <option value="name" selected>Name </option>
                            <option value="idnumber" >ID Number</option>
                            <option value="email">Email</option>
                            <option value="phone">Phone</option>
                            <option value="role">Role</option>
                            <option value="position">Position</option>
                            <option value="department">Department</option>
                        </select>
                        <button class="updateDB" type="submit">Search</button>
                    </form>
            </div>
            
           <div class="reports-content">

                <!-- Header row for main info -->
                <div class="report-header">
                    <span class="col-name">Name</span>
                    <span class="col-id">Employee ID</span>
                    <span class="col-email">Email</span>
                    <span class="col-phone">Phone</span>
                    <span class="col-role">Role</span>
                    <span class="col-position">Position</span>
                    <span class="col-department">Department</span>
                </div>

                {% for person in search_result %}
                <div class="report-card">
                    <div class="report-grid">
                        <!-- Profile picture -->
                        <div class="profile-pic">
                            <img src="{{ url_for('static', filename='images/' + (person.pic_path or 'error.jpg')) }}">
                        </div>

                        <!-- Main user info -->
                        <div class="user-info">
                            <span class="user-name">{{ person.first_name }} {{ person.last_name }}</span>
                            <span class="user-id">{{ person.employee_id }}</span>
                            <span class="user-email">{{ person.email }}</span>
                            <span class="user-phone">{{ person.phone }}</span>
                            <span class="user-role">{{ person.employee_role }}</span>
                            <span class="user-position">{{ person.position }}</span>
                            <span class="user-department">{{ person.department }}</span>
                        </div>

                        <!-- Time entries -->
                        <div class="time-entries">
                            {% if person.times %}
                                {% for t in person.times %}
                                    <div class="time-row">
                                        <span class="time-date">{{ t.date }}</span>
                                        <span class="time-in">{{ t.clockin }}</span>
                                        <span class="time-out">{{ t.clockout }}</span>
                                        <span class="time-duration">{{ t.duration }}</span>
                                    </div>
                                {% endfor %}
                            {% else %}
                                <div class="time-row no-times">
                                    <span>No time entries available</span>
                                </div>
                            {% endif %}
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>



        </div>
    </div>
</body>
</html>
